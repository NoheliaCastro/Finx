<!DOCTYPE html>
<html lang="es" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finx - Goals</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="trivia/shared-sidebar.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/chatbot-sidebar.css">
    <style>
        /* Header y navegación estilo navbar principal */
        .trivia-navbar {
            background-color: var(--background-color) !important;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            padding: 0.75rem 0;
            min-height: 95px;
            transition: all 0.3s ease;
        }

        .trivia-navbar-brand {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Logo en el navbar */
        .navbar-logo-container {
            display: flex;
            align-items: center;
            margin-right: 0.5rem;
        }

        .navbar-logo {
            max-height: 80px;
            height: auto;
            transition: all 0.3s ease;
        }

        .navbar-logo-light {
            display: block;
        }

        [data-bs-theme="dark"] .navbar-logo-light {
            display: none;
        }

        .navbar-logo-dark {
            display: none;
        }

        [data-bs-theme="dark"] .navbar-logo-dark {
            display: block;
        }

        /* Responsive para logo del navbar */
        @media (max-width: 768px) {
            .navbar-logo {
                max-height: 65px;
            }
        }

        @media (max-width: 576px) {
            .navbar-logo {
                max-height: 55px;
            }
        }

        /* Sidebar toggle y animaciones */
        .trivia-sidebar.hidden,
        .leccion-sidebar.hidden {
            transform: translateX(-100%);
        }

        /* Botón para toggle del sidebar */
        .sidebar-toggle-btn {
            position: fixed;
            left: 280px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: none;
            color: white;
            width: 40px;
            height: 60px;
            border-radius: 0 15px 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            z-index: 1000;
        }

        .sidebar-toggle-btn:hover {
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            transform: translateY(-50%) translateX(5px);
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.2);
        }

        .sidebar-toggle-btn.sidebar-hidden {
            left: 0;
            border-radius: 0 15px 15px 0;
        }

        /* Contenido principal */        .main-content {
            margin-left: 280px;
            padding: 2rem;
            min-height: 100vh;
            transition: margin-left 0.3s ease, width 0.3s ease;
        }

        /* Ajustar contenido cuando sidebar está oculto */
        .main-content.sidebar-hidden {
            margin-left: 0;
            width: 100%;
        }

        /* Responsive para main-content */
        @media (max-width: 1199.98px) {
            .main-content {
                margin-left: 280px;
                padding: 1.5rem;
            }
        }

        @media (max-width: 991.98px) {
            .main-content {
                margin-left: 0;
                padding: 1rem;
                width: 100%;
            }
        }

        @media (max-width: 767.98px) {
            .main-content {
                padding: 0.75rem;
            }
        }

        @media (max-width: 575.98px) {
            .main-content {
                padding: 0.5rem;
            }
        }        /* Responsive para sidebar toggle */
        @media (max-width: 991.98px) {
            .sidebar-toggle-btn {
                display: none;
            }
            
            /* En mobile, agregar un botón de menú en el navbar si es necesario */
            .mobile-menu-toggle {
                display: block;
                background: linear-gradient(135deg, #6366f1, #8b5cf6);
                border: none;
                color: white;
                width: 45px;
                height: 45px;
                border-radius: 50%;
                font-size: 1.2rem;
                transition: all 0.3s ease;
            }
            
            .mobile-menu-toggle:hover {
                background: linear-gradient(135deg, #8b5cf6, #6366f1);
                transform: scale(1.05);
            }
        }

        @media (min-width: 992px) {
            .mobile-menu-toggle {
                display: none;
            }
        }html, body {
            background: #fff;
            margin: 0;
            padding: 0;
            width: 100vw;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .main-section, .goals-section {
            background: #fff;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        /* Responsive para sección de goals */
        .goals-section {
            padding: 3rem 2rem !important;
        }

        @media (max-width: 1199.98px) {
            .goals-section {
                padding: 2.5rem 1.5rem !important;
            }
        }

        @media (max-width: 991.98px) {
            .goals-section {
                padding: 2rem 1rem !important;
            }
        }

        @media (max-width: 767.98px) {
            .goals-section {
                padding: 1.5rem 0.75rem !important;
            }
        }

        @media (max-width: 575.98px) {
            .goals-section {
                padding: 1rem 0.5rem !important;
            }
        }
        [data-bs-theme="dark"] html, [data-bs-theme="dark"] body {
            background: #181C24;
        }
        [data-bs-theme="dark"] .main-section, [data-bs-theme="dark"] .goals-section {
            background: linear-gradient(135deg, #232A36 0%, #181C24 100%);
        }
        [data-bs-theme="dark"] .trivia-sidebar {
            background: #181C24 !important;
            border-right: 1.5px solid #232A36;
        }        .goal-title {
            font-weight: 800;
            color: #004AAD !important;
            letter-spacing: 1px;
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 2.5rem;
        }

        /* Responsive para título principal */
        @media (max-width: 991.98px) {
            .goal-title {
                font-size: 2rem;
                margin-bottom: 2rem;
            }
        }

        @media (max-width: 767.98px) {
            .goal-title {
                font-size: 1.8rem;
                margin-bottom: 1.5rem;
            }
        }

        @media (max-width: 575.98px) {
            .goal-title {
                font-size: 1.6rem;
                margin-bottom: 1rem;
            }
        }        .goal-card {
            background: #fff !important;
            color: #002366 !important;
            border: 2px solid #004AAD !important;
            border-radius: 1.2rem !important;
            box-shadow: 0 2px 8px #00236622 !important;
            padding: 1.3rem 1.5rem 1.2rem 1.5rem !important;
            margin-bottom: 2rem !important;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Responsive para tarjetas de metas */
        @media (max-width: 1199.98px) {
            .goal-card {
                padding: 1.2rem 1.3rem !important;
                margin-bottom: 1.8rem !important;
                max-width: 550px;
            }
    }

        @media (max-width: 767.98px) {
            .goal-card {
                padding: 0.9rem 1rem !important;
                margin-bottom: 1.2rem !important;
                min-height: 90px;
                max-width: 100%;
            }
        }

        @media (max-width: 575.98px) {
            .goal-card {
                padding: 0.8rem 0.9rem !important;
                margin-bottom: 1rem !important;
                min-height: 80px;
                max-width: 100%;
            }
        }.goal-card .goal-title {
            color: #004AAD !important;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        /* Mejor contraste en modo oscuro (título principal y títulos dentro de tarjetas) */
        html[data-bs-theme="dark"] h1.goal-title,
        html[data-bs-theme="dark"] .goal-card .goal-title {
            color: #FFE676 !important;
            text-shadow: 0 0 6px rgba(0,0,0,0.35);
        }

        /* Responsive para título de tarjetas */
        @media (max-width: 991.98px) {
            .goal-card .goal-title {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 767.98px) {
            .goal-card .goal-title {
                font-size: 1.1rem;
                margin-bottom: 0.4rem;
            }
        }

        @media (max-width: 575.98px) {
            .goal-card .goal-title {
                font-size: 1rem;
                margin-bottom: 0.3rem;
            }
        }        .goal-card .badge {
            font-size: 0.95em;
            border-radius: 0.7em;
            padding: 0.3em 0.8em;
            white-space: nowrap;
        }

        /* Responsive para badges */
        @media (max-width: 767.98px) {
            .goal-card .badge {
                font-size: 0.85em;
                padding: 0.25em 0.6em;
                border-radius: 0.5em;
            }
        }

        @media (max-width: 575.98px) {
            .goal-card .badge {
                font-size: 0.8em;
                padding: 0.2em 0.5em;
                border-radius: 0.4em;
            }
        }        .goal-card .progress-bar {
            background: #E6E5E5;
            border-radius: 1rem;
            height: 1.2rem;
            margin-bottom: 0.5rem;
        }

        /* Responsive para barra de progreso */
        @media (max-width: 767.98px) {
            .goal-card .progress-bar {
                height: 1rem;
                border-radius: 0.8rem;
                margin-bottom: 0.4rem;
            }
        }

        @media (max-width: 575.98px) {
            .goal-card .progress-bar {
                height: 0.9rem;
                border-radius: 0.6rem;
                margin-bottom: 0.3rem;
            }
        }
        .goal-card .progress {
            background: #EEE95B;
            height: 100%;
            border-radius: 1rem;
            transition: width 0.5s;
        }        .goal-card .goal-progress-text {
            color: #002366 !important;
            font-weight: 600;
            font-size: 1em;
            margin-bottom: 0.5rem;
        }

        /* Responsive para texto de progreso */
        @media (max-width: 767.98px) {
            .goal-card .goal-progress-text {
                font-size: 0.9em;
                margin-bottom: 0.4rem;
            }
        }

        @media (max-width: 575.98px) {
            .goal-card .goal-progress-text {
                font-size: 0.85em;
                margin-bottom: 0.3rem;
            }
        }.goal-actions {
            display: flex;
            gap: 0.7rem;
            margin-top: 0.7rem;
            flex-wrap: wrap;
        }

        /* Responsive para acciones de metas */
        @media (max-width: 767.98px) {
            .goal-actions {
                gap: 0.5rem;
                margin-top: 0.5rem;
            }
        }

        @media (max-width: 575.98px) {
            .goal-actions {
                gap: 0.4rem;
                margin-top: 0.4rem;
                flex-direction: column;
            }
            
            .goal-actions .btn {
                width: 100%;
                justify-content: center;
            }
        }        .goal-actions .btn {
            font-size: 1rem;
            border-radius: 0.7rem;
            padding: 0.5rem 1.3rem;
            font-weight: 700;
            box-shadow: 0 1px 4px #00236611;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        }

        /* Responsive para botones */
        @media (max-width: 991.98px) {
            .goal-actions .btn {
                font-size: 0.95rem;
                padding: 0.45rem 1.1rem;
            }
        }

        @media (max-width: 767.98px) {
            .goal-actions .btn {
                font-size: 0.9rem;
                padding: 0.4rem 1rem;
                border-radius: 0.6rem;
            }
        }

        @media (max-width: 575.98px) {
            .goal-actions .btn {
                font-size: 0.85rem;
                padding: 0.5rem 1rem;
                border-radius: 0.5rem;
            }
        }
        .goal-actions .btn-outline-success {
            background: #EEE95B !important;
            color: #004AAD !important;
            border: none;
        }
        .goal-actions .btn-outline-success:hover {
            background: #004AAD !important;
            color: #EEE95B !important;
        }
        .goal-actions .btn-outline-danger {
            background: #fff !important;
            color: #004AAD !important;
            border: 2px solid #004AAD;
        }
        .goal-actions .btn-outline-danger:hover {
            background: #004AAD !important;
            color: #fff !important;
        }        .form-modern h5 {
            text-align: center;
            color: #EEE95B;
            font-weight: 800;
            font-size: 2rem;
            margin-bottom: 2rem;
            letter-spacing: 1px;
        }

        /* Responsive para título del formulario */
        @media (max-width: 991.98px) {
            .form-modern h5 {
                font-size: 1.8rem;
                margin-bottom: 1.5rem;
            }
        }

        @media (max-width: 767.98px) {
            .form-modern h5 {
                font-size: 1.6rem;
                margin-bottom: 1.2rem;
            }
        }

        @media (max-width: 575.98px) {
            .form-modern h5 {
                font-size: 1.4rem;
                margin-bottom: 1rem;
            }
        }
        .form-modern .form-label {
            color: #fff;
            font-weight: 600;
        }        .form-modern .form-control, .form-modern .form-select {
            border-radius: 10px;
            border: 2px solid #bfc9d1;
            background: #fff;
            color: #002366;
            font-size: 1.1rem;
            padding: 0.75rem 1rem;
            margin-bottom: 1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        /* Responsive para inputs del formulario */
        @media (max-width: 767.98px) {
            .form-modern .form-control, .form-modern .form-select {
                font-size: 1rem;
                padding: 0.65rem 0.9rem;
                margin-bottom: 0.8rem;
                border-radius: 8px;
            }
        }

        @media (max-width: 575.98px) {
            .form-modern .form-control, .form-modern .form-select {
                font-size: 0.95rem;
                padding: 0.6rem 0.8rem;
                margin-bottom: 0.7rem;
                border-radius: 6px;
            }
        }
        .form-modern .form-control:focus, .form-modern .form-select:focus {
            border-color: #EEE95B;
            box-shadow: 0 0 0 2px #EEE95B44;
        }
        .form-modern .btn-primary, .modal-footer .btn-primary, .goal-actions .btn-outline-success {
            background: #EEE95B !important;
            color: #002366 !important;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 2px 8px #004AAD22;
            padding: 0.7rem 2.2rem;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.2s;
        }
        .form-modern .btn-primary:hover, .modal-footer .btn-primary:hover, .goal-actions .btn-outline-success:hover {
            background: #004AAD !important;
            color: #EEE95B !important;
        }
        .form-modern .btn-secondary, .modal-footer .btn-secondary, .goal-actions .btn-outline-danger {
            background: #fff !important;
            color: #004AAD !important;
            border: 2px solid #EEE95B;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.1rem;
            padding: 0.7rem 2.2rem;
            margin-right: 0.5rem;
            transition: background 0.2s, color 0.2s;
        }
        .form-modern .btn-secondary:hover, .modal-footer .btn-secondary:hover, .goal-actions .btn-outline-danger:hover {
            background: #EEE95B !important;
            color: #002366 !important;
        }        /* Modal diseño institucional */
        .modal-header {
            border-bottom: 2px solid #EEE95B;
        }
        .modal-title {
            color: #EEE95B;
            font-weight: 800;
        }

        /* Responsive para modales */
        @media (max-width: 767.98px) {
            .modal-dialog {
        /* Mejor contraste en modo oscuro para el título principal y títulos dentro de tarjetas */
        [data-bs-theme="dark"] h1.goal-title { /* título principal arriba */
            color: #EEE95B !important;
        }
        [data-bs-theme="dark"] .goal-card .goal-title { /* títulos de cada meta */
            color: #EEE95B !important;
        }
                margin: 1rem 0.5rem;
                max-width: calc(100% - 1rem);
            }
            
            .modal-body {
                padding: 1rem;
            }
            
            .modal-header {
                padding: 1rem;
            }
            
            .modal-footer {
                padding: 1rem;
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .modal-footer .btn {
                width: 100%;
                margin: 0;
            }
        }

        @media (max-width: 575.98px) {
            .modal-dialog {
                margin: 0.5rem 0.25rem;
                max-width: calc(100% - 0.5rem);
            }
            
            .modal-body {
                padding: 0.75rem;
            }
            
            .modal-header {
                padding: 0.75rem;
            }
            
            .modal-footer {
                padding: 0.75rem;
            }
        }
        /* Ajuste: antes este bloque usaba @media (prefers-color-scheme: dark) y forzaba fondo oscuro
           incluso cuando el usuario seleccionaba manualmente el modo claro.
           Ahora solo aplicamos estilos oscuros cuando realmente el atributo data-bs-theme="dark" está activo. */
        :root[data-bs-theme="dark"] body, [data-bs-theme="dark"] body {
            background: #1a1d23;
        }
        :root[data-bs-theme="dark"] .goal-card, [data-bs-theme="dark"] .card.form-modern, [data-bs-theme="dark"] .modal-content {
            background: #002366 !important;
            color: #fff !important;
        }
        :root[data-bs-theme="dark"] .form-modern .form-control, :root[data-bs-theme="dark"] .form-modern .form-select,
        [data-bs-theme="dark"] .form-modern .form-control, [data-bs-theme="dark"] .form-modern .form-select {
            background: #E6E5E5;
            color: #002366;
        }
        /* Forzar fondo claro limpio cuando data-bs-theme="light" aunque el SO esté en dark */
        :root[data-bs-theme="light"] body, [data-bs-theme="light"] body {
            background: #ffffff !important;
        }
        [data-bs-theme="dark"] .navbar {
            background: #23272b !important;
            color: #EEE95B !important;
            border-bottom: 1.5px solid #EEE95B;
        }
        [data-bs-theme="dark"] .navbar .nav-link,
        [data-bs-theme="dark"] .navbar .navbar-brand,
        [data-bs-theme="dark"] .navbar .nav-link i {
            color: #EEE95B !important;
        }
        [data-bs-theme="dark"] .navbar .nav-link.active {
            color: #fff !important;
            font-weight: bold;
        }
        [data-bs-theme="dark"] .navbar .btn-primary {
            background: #EEE95B !important;
            color: #23272b !important;
            border: none;
        }
        [data-bs-theme="dark"] .navbar .btn-primary:hover {
            background: #bdb82e !important;
            color: #23272b !important;
        }        .goal-achieved-card {
            border: 2.5px solid #004AAD;
            background: #fff;
            color: #23272b;
            font-weight: 700;
            font-size: 1.15rem;
            border-radius: 1.1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 24px #004AAD22;
            padding: 1.1rem 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            animation: goal-shine 1.2s ease-in-out;
        }

        /* Responsive para tarjeta de logro */
        @media (max-width: 767.98px) {
            .goal-achieved-card {
                font-size: 1rem;
                padding: 0.9rem 1rem;
                gap: 0.5rem;
                flex-direction: column;
                text-align: center;
            }
            
            .goal-achieved-card .goal-emoji {
                font-size: 1.8rem;
                margin-right: 0;
                margin-bottom: 0.2rem;
            }
        }

        @media (max-width: 575.98px) {
            .goal-achieved-card {
                font-size: 0.95rem;
                padding: 0.8rem 0.9rem;
            }
            
            .goal-achieved-card .goal-emoji {
                font-size: 1.6rem;
            }
        }

        .goal-achieved-card .goal-emoji {
            font-size: 2rem;
            margin-right: 0.5rem;
        }
        @keyframes goal-shine {
            0% { box-shadow: 0 0 0 0 #EEE95B44; }
            60% { box-shadow: 0 0 32px 8px #EEE95B88; }
            100% { box-shadow: 0 4px 24px #004AAD22; }
        }
        [data-bs-theme="dark"] .goal-achieved-card {
            border: 2.5px solid #EEE95B;
            background: #002366;
            color: #fff;
            box-shadow: 0 4px 24px #EEE95B22;
        }
        .goal-progress-text {
            color: #fff !important;
            font-weight: 600;
        }
        .leccion-navbar {
            background: linear-gradient(135deg, var(--background-color), rgba(99, 102, 241, 0.05)) !important;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 0.15rem 0;
            min-height: 80px;
            transition: all 0.3s ease;
        }
        .leccion-navbar-brand {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--fun-primary), var(--fun-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .leccion-theme-toggle {
            background: linear-gradient(135deg, var(--fun-primary), var(--fun-secondary));
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }
        .leccion-theme-toggle:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }
        :root {
            --fun-primary: #6366f1;
            --fun-secondary: #8b5cf6;
            --fun-accent: #06b6d4;
            --fun-success: #10b981;
            --fun-warning: #f59e0b;
            --fun-danger: #ef4444;
            --fun-pink: #ec4899;
            --fun-purple: #a855f7;
            --fun-orange: #f97316;
            --fun-yellow: #eab308;
        }
        
        /* Estilos para el perfil de usuario en el navbar */
        .user-profile-navbar {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .user-profile-navbar:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .avatar-small {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
        }
        
        .user-info-small {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            line-height: 1.2;
        }
        
        .user-name {
            font-weight: 600;
            font-size: 0.9rem;
            color: #333;
            margin: 0;
        }
        
        .user-level {
            font-size: 0.75rem;
            color: #666;
            margin: 0;
        }
        
        /* Estilos para modo oscuro */
        [data-bs-theme="dark"] .user-profile-navbar {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        [data-bs-theme="dark"] .user-profile-navbar:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        [data-bs-theme="dark"] .user-name {
            color: #fff;
        }
        
        [data-bs-theme="dark"] .user-level {
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* Responsive para el perfil de usuario */
        @media (max-width: 768px) {
            .user-profile-navbar {
                padding: 0.4rem 0.75rem;
                gap: 0.5rem;
            }
            
            .avatar-small {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
            
            .user-name {
                font-size: 0.8rem;
            }
            
            .user-level {
                font-size: 0.7rem;
            }
        }
        
        @media (max-width: 576px) {
            .user-info-small {
                display: none;
            }
            
            .user-profile-navbar {
                padding: 0.5rem;
                gap: 0;
            }
            
            .avatar-small {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
        }
        
        /* Estilos para el menú desplegable */
        .user-profile-navbar {
            position: relative;
            cursor: pointer;
        }
        
        .user-profile-navbar::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            height: 8px;
            background: transparent;
            display: none;
        }
        
        .user-dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            width: 280px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(0, 0, 0, 0.08);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 9999;
            margin-top: 8px;
            overflow: hidden;
            pointer-events: none;
            display: block;
        }
        
        .user-profile-navbar.open .user-dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            pointer-events: auto;
        }
        
        .dropdown-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .dropdown-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.4rem;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
        
        .dropdown-user-info {
            display: flex;
            flex-direction: column;
            line-height: 1.3;
        }
        
        .dropdown-user-name {
            font-weight: 700;
            font-size: 1rem;
            color: #333;
            margin: 0;
        }
        
        .dropdown-user-level {
            font-size: 0.8rem;
            color: #666;
            margin: 0;
        }
        
        .dropdown-divider {
            height: 1px;
            background: rgba(0, 0, 0, 0.08);
            margin: 8px 0;
        }
        
        .dropdown-item {
            display: block;
            width: 100%;
            text-align: left;
            cursor: pointer;
            box-sizing: border-box;
            padding: 0;
            border: none;
            background: none;
            color: #333;
            text-decoration: none;
            transition: all 0.2s ease;
        }
        .dropdown-item-content {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            width: 100%;
        }
        .dropdown-item span {
            pointer-events: none;
            z-index: 1;
        }
        .dropdown-item i {
            pointer-events: none;
        }
        .dropdown-item:hover {
            background: rgba(99, 102, 241, 0.05);
            color: #6366f1;
            transform: translateX(4px);
        }
        
        .dropdown-item span {
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .dropdown-item-danger {
            color: #dc3545;
        }
        
        .dropdown-item-danger:hover {
            background: rgba(220, 53, 69, 0.05);
            color: #dc3545;
        }
        
        /* Estilos para modo oscuro */
        [data-bs-theme="dark"] .user-dropdown-menu {
            background: #232A36;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        [data-bs-theme="dark"] .dropdown-header {
            background: linear-gradient(135deg, #2d3748, #1a202c);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        [data-bs-theme="dark"] .dropdown-user-name {
            color: #fff;
        }
        
        [data-bs-theme="dark"] .dropdown-user-level {
            color: rgba(255, 255, 255, 0.7);
        }
        
        [data-bs-theme="dark"] .dropdown-divider {
            background: rgba(255, 255, 255, 0.1);
        }
        
        [data-bs-theme="dark"] .dropdown-item {
            color: #fff;
        }
        
        [data-bs-theme="dark"] .dropdown-item:hover {
            background: rgba(99, 102, 241, 0.1);
            color: #6366f1;
        }
        
        [data-bs-theme="dark"] .dropdown-item-danger {
            color: #ff6b6b;
        }
        
        [data-bs-theme="dark"] .dropdown-item-danger:hover {
            background: rgba(255, 107, 107, 0.1);
            color: #ff6b6b;
        }
        
        /* Responsive para el menú desplegable */
        @media (max-width: 768px) {
            .user-dropdown-menu {
                width: 260px;
                right: -10px;
            }
            
            .dropdown-header {
                padding: 14px 16px;
            }
            
            .dropdown-avatar {
                width: 42px;
                height: 42px;
                font-size: 1.2rem;
            }
            
            .dropdown-item {
                padding: 10px 16px;
            }
        }
        
        @media (max-width: 576px) {
            .user-dropdown-menu {
                width: 240px;
                right: -20px;
            }
            
            .dropdown-header {
                padding: 12px 14px;
            }
            
            .dropdown-avatar {
                width: 38px;
                height: 38px;
                font-size: 1.1rem;
            }
            
            .dropdown-item {
                padding: 8px 14px;
            }
            
            .dropdown-item span {
                font-size: 0.85rem;
            }
        }
        
        /* Logo en el sidebar */
        .sidebar-logo-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1rem;
            margin-top: 1rem;
            padding: 0;
        }
        
        .sidebar-logo {
            max-width: 170px;
            height: auto;
            display: none;
            transition: all 0.3s ease;
        }
        
        .sidebar-logo-light {
            display: block;
        }
        
        [data-bs-theme="dark"] .sidebar-logo-light {
            display: none;
        }
        
        .sidebar-logo-dark {
            display: none;
        }
        
        [data-bs-theme="dark"] .sidebar-logo-dark {
            display: block;
        }
        
        @media (max-width: 991px) {
            .sidebar-logo-container {
                margin-bottom: 1rem;
            }
            .sidebar-logo {
                max-width: 110px;
            }
        }
        
        @media (max-width: 576px) {
            .sidebar-logo-container {
                margin-bottom: 0.75rem;
            }
            .sidebar-logo {
                max-width: 75px;
            }
        }
        .leccion-sidebar .container-fluid {
            padding-top: 0.2rem;
        }
        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
            max-height: 68vh;
            overflow-y: auto;
        }
        .sidebar-nav li {
            margin-bottom: 0.1rem;
        }
        .sidebar-nav a {
            font-size: 1.13rem;
            padding: 0.85rem 1.3rem;
            font-weight: 500;
        }
        
        /* Aplicar fuentes a todo el body */
        body {
            font-family: 'Rubik', sans-serif;
        }
        
        /* Aplicar Montserrat a títulos y elementos específicos */
        h1, h2, h3, h4, h5, h6,
        .navbar-brand,
        .trivia-navbar-brand,
        .sidebar-nav a,
        .user-name,
        .dropdown-user-name {
            font-family: 'Montserrat', sans-serif;
        }
        
        /* Eliminar la regla que forzaba fondo blanco en modo oscuro */
        /* [data-bs-theme="dark"] .goal-card { background: #fff !important; color: #002366 !important; } */
        .trivia-theme-toggle {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(129,140,248,0.10);
            cursor: pointer;
        }
        .trivia-theme-toggle:hover {
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(129,140,248,0.18);
        }        .trivia-theme-toggle i {
            font-size: 1.5rem;
        }

        /* Estilos responsive para contenedores de metas */
        .goals-container {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: 1fr;
            max-width: 100%;
            margin: 0 auto;
        }        /* Contenedor del formulario responsive */
        .goal-form-container {
            max-width: 500px;
            margin: 0 auto 2rem auto;
            width: 100%;
        }

        /* Grid responsive para las metas - centrado mejorado */
        @media (min-width: 1200px) {
            .goals-container {
                grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
                gap: 2rem;
                justify-content: center;
                margin: 0 auto;
            }
            
            .main-content:not(.sidebar-hidden) .goals-container {
                grid-template-columns: 1fr;
                max-width: 800px;
                justify-items: center;
            }
            
            .main-content.sidebar-hidden .goals-container {
                grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
                max-width: 1200px;
                justify-content: center;
                justify-items: center;
            }
        }

        @media (min-width: 992px) and (max-width: 1199.98px) {
            .goals-container {
                grid-template-columns: 1fr;
                max-width: 700px;
                justify-items: center;
                margin: 0 auto;
            }
            
            .main-content.sidebar-hidden .goals-container {
                grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                max-width: 1000px;
                justify-content: center;
                justify-items: center;
            }
        }

        @media (min-width: 768px) and (max-width: 991.98px) {
            .goals-container {
                grid-template-columns: 1fr;
                max-width: 600px;
                justify-items: center;
                margin: 0 auto;
            }
            
            .goal-form-container {
                max-width: 450px;
            }
        }

        @media (max-width: 767.98px) {
            .goals-container {
                grid-template-columns: 1fr;
                gap: 1rem;
                max-width: 100%;
                justify-items: center;
                margin: 0 auto;
            }
            
            .goal-form-container {
                max-width: 100%;
                margin-bottom: 1.5rem;
            }
        }

        /* Ajustes dinámicos según el estado del sidebar */
        .main-content {
            transition: all 0.3s ease;
        }

        .main-content .goals-section {
            transition: all 0.3s ease;
        }        /* Sidebar visible - contenido más estrecho y centrado */
        @media (min-width: 992px) {
            .main-content:not(.sidebar-hidden) {
                display: flex;
                justify-content: center;
                align-items: flex-start;
                padding: 2rem 1rem;
            }
            
            .main-content:not(.sidebar-hidden) .goals-section {
                width: 100%;
                max-width: 800px;
                margin: 0 auto;
                padding: 2rem 1rem !important;
                transform: translateX(50px);
            }
            
            .main-content:not(.sidebar-hidden) .goal-form-container {
                max-width: 500px;
                margin: 0 auto 2rem auto;
            }
            
            .main-content:not(.sidebar-hidden) .goals-container {
                max-width: 700px;
                margin: 0 auto;
            }
        }

        /* Sidebar oculto - contenido más amplio y centrado */
        @media (min-width: 992px) {
            .main-content.sidebar-hidden {
                display: flex;
                justify-content: center;
                align-items: flex-start;
                padding: 2rem 2rem;
            }
            
            .main-content.sidebar-hidden .goals-section {
                width: 100%;
                max-width: 1200px;
                margin: 0 auto;
                padding: 2rem !important;
            }
            
            .main-content.sidebar-hidden .goal-form-container {
                max-width: 600px;
                margin: 0 auto 2rem auto;
            }
            
            .main-content.sidebar-hidden .goals-container {
                max-width: 1000px;
                margin: 0 auto;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar trivia-navbar">
        <div class="container-fluid">
            <div class="d-flex align-items-center justify-content-between w-100">
                <div style="flex:1; display:flex; align-items:center; gap: 1rem;">
                    <!-- Logo de Finx en navbar -->
                    <div class="navbar-logo-container">
                        <img src="images/modo-claro.png" alt="Finx Logo" class="navbar-logo navbar-logo-light">
                        <img src="images/modo-oscuro.png" alt="Finx Logo" class="navbar-logo navbar-logo-dark">
                    </div>
                </div>
                <div style="flex:1; display:flex; justify-content:end; align-items:center; gap: 1rem;">
                    <button class="trivia-theme-toggle" id="langToggle" title="Traducir página">
                        <i class="bi bi-translate"></i>
                    </button>
                    <button class="trivia-theme-toggle" id="themeToggle" title="Change theme">
                        <i class="bi bi-moon-fill" id="themeIcon"></i>
                    </button>
                    <div class="user-profile-navbar">
                        <div class="avatar-small">
                            <i class="bi bi-person-fill"></i>
                        </div>
                        <div class="user-info-small">
                            <span class="user-name">Usuario</span>
                            <small class="user-level">Nivel 2</small>
                        </div>
                        <!-- Menú desplegable -->
                        <div class="user-dropdown-menu">
                            <div class="dropdown-header">
                                <div class="dropdown-avatar">
                                    <i class="bi bi-person-fill"></i>
                                </div>
                                <div class="dropdown-user-info">
                                    <span class="dropdown-user-name">Usuario</span>
                                    <small class="dropdown-user-level">Nivel 2</small>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <div class="dropdown-item-content">
                                    <i class="bi bi-person-circle"></i>
                                    <span>Mi Perfil</span>
                                </div>
                            </a>
                            <a href="#" class="dropdown-item">
                                <div class="dropdown-item-content">
                                    <i class="bi bi-gear"></i>
                                    <span>Configuración</span>
                                </div>
                            </a>
                            <a href="#" class="dropdown-item">
                                <div class="dropdown-item-content">
                                    <i class="bi bi-shield-check"></i>
                                    <span>Privacidad</span>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item dropdown-item-danger" id="logoutBtnNavbar">
                                <div class="dropdown-item-content">
                                    <i class="bi bi-box-arrow-right"></i>
                                    <span>Cerrar Sesión</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <style>
    .leccion-navbar {
        background: #fff !important;
    }
    [data-bs-theme="dark"] .leccion-navbar {
        background: #002366 !important;
    }
    /* Corregir fondo de las tarjetas de metas en modo oscuro */
    [data-bs-theme="dark"] .goal-card {
        background: #232A36 !important;
        color: #EEE95B !important;
        border-color: #EEE95B !important;
    }
    /* Fondo y color en modo claro */
    .goal-card {
        background: #fff !important;
        color: #002366 !important;
        border-color: #004AAD !important;
    }    .main-content {
        width: 100vw;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        background: transparent;
    }

    /* Responsive para main-content override */
    @media (max-width: 991.98px) {
        .main-content {
            margin-left: 0 !important;
            width: 100% !important;
        }
    }

    /* Ajuste para pantallas muy pequeñas */
    @media (max-width: 320px) {
        .main-content {
            min-width: 320px;
        }
        
        .goals-section {
            padding: 0.5rem 0.25rem !important;
        }
        
        .goal-form-container {
            padding: 0.75rem !important;
        }
        
        .goal-card {
            padding: 0.6rem 0.7rem !important;
        }
    }
    </style>
    <!-- Sidebar -->
    <!-- Sidebar -->
    <nav class="leccion-sidebar trivia-sidebar">
        <div class="container-fluid">
            <div class="sidebar-logo-container text-center mb-3">
                <img src="images/modo-claro.png" alt="Finx Logo" class="sidebar-logo sidebar-logo-light">
                <img src="images/modo-oscuro.png" alt="Finx Logo" class="sidebar-logo sidebar-logo-dark">
            </div>
            <ul class="sidebar-nav">
                <li>
                    <a href="dashboard.html">
                        <i class="bi bi-house-door-fill"></i>
                        <span>Management</span>
                    </a>
                </li>
                <li>
                    <a href="trivia/trivia.html">
                        <i class="bi bi-book-fill"></i>
                        <span>Lessons</span>
                    </a>
                </li>
                <li>
                    <a href="trivia/logros.html">
                        <i class="bi bi-trophy-fill"></i>
                        <span>Achievements</span>
                    </a>
                </li>
                <li>
                    <a href="goals.html" class="active">
                        <i class="bi bi-flag-fill"></i>
                        <span>Goals</span>
                    </a>
                </li>
                <li>
                    <a href="helpcenter2.html">
                        <i class="bi bi-question-circle-fill"></i>
                        <span>Help</span>
                    </a>
                </li>
                <li>
                    <a href="chatbot.html">
                        <i class="bi bi-robot"></i>
                        <span>Assistant</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle-btn" id="sidebarToggle">
        <i class="bi bi-chevron-left"></i>
    </button>    <!-- Contenido principal -->
    <main class="main-content">
        <section class="goals-section w-100 py-5">
            <div class="container-fluid px-0">
                <h1 class="mb-4 goal-title">My Financial Goals</h1>
                <!-- Formulario para agregar meta -->
                <div class="card p-4 mb-4 goal-form-container">
                    <h5 class="mb-3">Add New Goal</h5>
                    <form id="goalForm">
                        <div class="mb-3">
                            <label for="goalName" class="form-label">Goal Name</label>
                            <input type="text" class="form-control" id="goalName" required>
                        </div>
                        <div class="mb-3">
                            <label for="goalTarget" class="form-label">Target Amount</label>
                            <input type="number" class="form-control" id="goalTarget" min="1" step="0.01" required>
                        </div>
                        <div class="mb-3">
                            <label for="goalDeadline" class="form-label">Deadline (optional)</label>
                            <input type="date" class="form-control" id="goalDeadline">
                        </div>
                        <div class="d-flex justify-content-end gap-2 flex-wrap">
                            <button type="reset" class="btn btn-secondary">Clear</button>
                            <button type="submit" class="btn btn-primary">Add Goal</button>
                        </div>
                    </form>
                </div>
                <!-- Lista de metas -->
                <div class="goals-container">
                    <div id="goalsList"></div>
                </div>
            </div>
        </section>
        <!-- Modal para agregar ahorro -->
        <div class="modal fade" id="addSavingModal" tabindex="-1" aria-labelledby="addSavingModalLabel" aria-hidden="true" style="z-index:1055;">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="addSavingModalLabel">Add Saving to Goal</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="addSavingForm">
                  <div class="mb-3">
                    <label for="savingAmount" class="form-label">How much do you want to add?</label>
                    <input type="number" class="form-control" id="savingAmount" min="0.01" step="0.01" required autocomplete="off">
                  </div>
                  <div class="d-flex justify-content-end gap-2">
                    <button type="button" class="btn btn-secondary btn-animated" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary btn-animated">Add</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/components.js"></script>
    <script src="js/chatbot-sidebar.js"></script>    <script>
        // Menú de usuario con click
        document.addEventListener('DOMContentLoaded', function() {
            var userProfile = document.querySelector('.user-profile-navbar');
            var userMenu = document.querySelector('.user-dropdown-menu');

            if (userProfile && userMenu) {
                userProfile.addEventListener('click', function(e) {
                    e.stopPropagation();
                    userProfile.classList.toggle('open');
                });

                // Cerrar el menú al hacer click fuera
                document.addEventListener('click', function(e) {
                    if (userProfile.classList.contains('open')) {
                        if (!userProfile.contains(e.target)) {
                            userProfile.classList.remove('open');
                        }
                    }
                });
            }

            // Agregar funcionalidad al botón de cerrar sesión del navbar
            var logoutBtnNavbar = document.getElementById('logoutBtnNavbar');
            if (logoutBtnNavbar) {
                logoutBtnNavbar.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.location.href = 'index.html';
                });
            }
            
            // Agregar funcionalidad al botón de cerrar sesión del sidebar
            var sidebarLogoutBtn = document.getElementById('sidebarLogoutBtn');
            if (sidebarLogoutBtn) {
                sidebarLogoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.location.href = 'index.html';
                });
            }

            // Sidebar toggle functionality
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.querySelector('.trivia-sidebar');
            const mainContent = document.querySelector('.main-content');
            const toggleIcon = sidebarToggle.querySelector('i');            // Verificar si estamos en desktop
            function isDesktop() {
                return window.innerWidth >= 992;
            }

            // Estado inicial del sidebar - Para goals.html siempre empezar con sidebar abierto
            let sidebarHidden = false; // Forzar que esté abierto en goals.html
            
            function updateSidebarState() {
                if (isDesktop()) {
                    if (sidebarHidden) {
                        sidebar.classList.add('hidden');
                        mainContent.classList.add('sidebar-hidden');
                        sidebarToggle.classList.add('sidebar-hidden');
                        toggleIcon.className = 'bi bi-chevron-right';
                    } else {
                        sidebar.classList.remove('hidden');
                        mainContent.classList.remove('sidebar-hidden');
                        sidebarToggle.classList.remove('sidebar-hidden');
                        toggleIcon.className = 'bi bi-chevron-left';
                    }
                } else {
                    // En mobile, sidebar siempre oculto
                    sidebar.classList.add('hidden');
                    mainContent.classList.add('sidebar-hidden');
                    sidebarToggle.classList.add('sidebar-hidden');
                }
            }

            // Aplicar estado inicial
            updateSidebarState();

            // Toggle del sidebar
            sidebarToggle.addEventListener('click', function() {
                if (isDesktop()) {
                    sidebarHidden = !sidebarHidden;
                    localStorage.setItem('sidebar-hidden', sidebarHidden.toString());
                    updateSidebarState();
                }
            });

            // Actualizar en resize
            window.addEventListener('resize', updateSidebarState);
        });
    </script>
    <script>
        // Utilidades para localStorage
        function getGoals() {
            return JSON.parse(localStorage.getItem('finx_goals') || '[]');
        }
        function saveGoals(goals) {
            localStorage.setItem('finx_goals', JSON.stringify(goals));
        }        // Renderizar metas
        function renderGoals() {
            const goals = getGoals();
            const container = document.getElementById('goalsList');
            container.innerHTML = '';
            if (goals.length === 0) {
                container.innerHTML = '<div class="text-center text-muted p-4">No goals yet. Add your first goal!</div>';
                return;
            }
            goals.forEach((goal, idx) => {
                const percent = Math.min(100, Math.round((goal.saved || 0) / goal.target * 100));
                let achievedCard = '';
                let actions = '';
                if ((goal.saved || 0) >= goal.target) {
                    achievedCard = `<div class="goal-achieved-card"><span class="goal-emoji">🏆</span>¡Achievement reached! You can go for your <b>${goal.name}</b></div>`;
                    actions = `<button class="btn btn-sm btn-outline-danger" onclick="deleteGoal(${idx})">Delete</button>`;
                } else {
                    actions = `<button class="btn btn-sm btn-outline-success" onclick="addToGoal(${idx})">Add Saving</button>
                              <button class="btn btn-sm btn-outline-danger" onclick="deleteGoal(${idx})">Delete</button>`;
                }
                
                const goalCard = document.createElement('div');
                goalCard.className = 'goal-card';
                goalCard.innerHTML = `
                    ${achievedCard}
                    <div class="d-flex justify-content-between align-items-center mb-2 flex-wrap">
                        <h4 class="goal-title mb-0">${goal.name}</h4>
                        <div class="d-flex gap-1 mt-2 mt-md-0">
                            <span class="badge bg-${percent === 100 ? 'success' : 'primary'} me-1">${percent}%</span>
                            <span class="badge bg-info text-dark">$${(goal.saved || 0).toLocaleString()}</span>
                        </div>
                    </div>
                    <div class="progress-bar mb-2">
                        <div class="progress" style="width:${percent}%;"></div>
                    </div>
                    <div class="mb-2 goal-progress-text" style="font-size:0.98em;">$${(goal.saved || 0).toLocaleString()} / $${Number(goal.target).toLocaleString()}</div>
                    ${goal.deadline ? `<div class="mb-2 text-muted" style="font-size:0.95em;">Deadline: ${goal.deadline}</div>` : ''}
                    <div class="goal-actions">
                        ${actions}
                    </div>
                `;
                container.appendChild(goalCard);
            });
        }
        // Agregar meta
        document.getElementById('goalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('goalName').value.trim();
            const target = parseFloat(document.getElementById('goalTarget').value);
            const deadline = document.getElementById('goalDeadline').value;
            const goals = getGoals();
            goals.push({ name, target, deadline, saved: 0 });
            saveGoals(goals);
            this.reset();
            renderGoals();
        });
        // Agregar ahorro a meta
        let savingGoalIdx = null;
        window.addToGoal = function(idx) {
            savingGoalIdx = idx;
            document.getElementById('savingAmount').value = '';
            const modalEl = document.getElementById('addSavingModal');
            const modal = new bootstrap.Modal(modalEl);
            modal.show();
        }
        document.getElementById('addSavingModal').addEventListener('shown.bs.modal', function () {
            document.getElementById('savingAmount').focus();
        });
        document.getElementById('addSavingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const num = parseFloat(document.getElementById('savingAmount').value);
            if (!isNaN(num) && num > 0 && savingGoalIdx !== null) {
                const goals = getGoals();
                goals[savingGoalIdx].saved = (goals[savingGoalIdx].saved || 0) + num;
                saveGoals(goals);
                renderGoals();
                bootstrap.Modal.getInstance(document.getElementById('addSavingModal')).hide();
            }
        });
        // Eliminar meta
        window.deleteGoal = function(idx) {
            if (confirm('Are you sure you want to delete this goal?')) {
                const goals = getGoals();
                goals.splice(idx, 1);
                saveGoals(goals);
                renderGoals();
            }
        }
        document.addEventListener('DOMContentLoaded', renderGoals);
        // Función para cambiar tema
        function toggleTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('themeIcon');
            const currentTheme = html.getAttribute('data-bs-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-bs-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            if (newTheme === 'dark') {
                icon.className = 'bi bi-sun-fill';
            } else {
                icon.className = 'bi bi-moon-fill';
            }
        }
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-bs-theme', savedTheme);
            const icon = document.getElementById('themeIcon');
            if (savedTheme === 'dark') {
                icon.className = 'bi bi-sun-fill';
            } else {
                icon.className = 'bi bi-moon-fill';
            }
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
        });
        document.addEventListener('DOMContentLoaded', function() {
            var logoutBtn = document.getElementById('logoutBtnSidebar');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    window.location.href = 'index.html';
                });
            }
        });
    </script>
<script>
// Traducción de la página
const translations = {
    es: {
        'management': 'Gestión',
        'lessons': 'Lecciones',
        'achievements': 'Logros',
        'goals': 'Metas',
        'help': 'Ayuda',
        'logout': 'Cerrar sesión',
        'assistant': 'Asistente',
        'user': 'Usuario',
        'level': 'Nivel 2',
        'goal-title': 'Mis Metas Financieras',
        'add-new-goal': 'Agregar Nueva Meta',
        'goal-name': 'Nombre de la Meta',
        'target-amount': 'Cantidad Objetivo',
        'deadline': 'Fecha Límite (opcional)',
        'clear': 'Limpiar',
        'add-goal': 'Agregar Meta',
        'no-goals': 'Aún no tienes metas. ¡Agrega tu primera meta!',
        'add-saving': 'Agregar Ahorro',
        'delete': 'Eliminar',
        'achievement-reached': '¡Meta alcanzada! Puedes ir por tu',
        'deadline-label': 'Fecha límite:',
        'add-saving-modal': 'Agregar Ahorro a la Meta',
        'how-much': '¿Cuánto deseas agregar?',
        'cancel': 'Cancelar',
        'add': 'Agregar',
        'are-you-sure': '¿Estás seguro de que deseas eliminar esta meta?',
    },
    en: {
        'management': 'Management',
        'lessons': 'Lessons',
        'achievements': 'Achievements',
        'goals': 'Goals',
        'help': 'Help',
        'logout': 'Logout',
        'assistant': 'Assistant',
        'user': 'User',
        'level': 'Level 2',
        'goal-title': 'My Financial Goals',
        'add-new-goal': 'Add New Goal',
        'goal-name': 'Goal Name',
        'target-amount': 'Target Amount',
        'deadline': 'Deadline (optional)',
        'clear': 'Clear',
        'add-goal': 'Add Goal',
        'no-goals': 'No goals yet. Add your first goal!',
        'add-saving': 'Add Saving',
        'delete': 'Delete',
        'achievement-reached': 'Achievement reached! You can go for your',
        'deadline-label': 'Deadline:',
        'add-saving-modal': 'Add Saving to Goal',
        'how-much': 'How much do you want to add?',
        'cancel': 'Cancel',
        'add': 'Add',
        'are-you-sure': 'Are you sure you want to delete this goal?',
    }
};
function setLanguage(lang) {
    localStorage.setItem('finx_lang', lang);
    // Sidebar
    document.querySelectorAll('.sidebar-nav li')[0].querySelector('span').textContent = translations[lang]['management'];
    document.querySelectorAll('.sidebar-nav li')[1].querySelector('span').textContent = translations[lang]['lessons'];
    document.querySelectorAll('.sidebar-nav li')[2].querySelector('span').textContent = translations[lang]['achievements'];
    document.querySelectorAll('.sidebar-nav li')[3].querySelector('span').textContent = translations[lang]['goals'];
    document.querySelectorAll('.sidebar-nav li')[4].querySelector('span').textContent = translations[lang]['help'];
    document.querySelectorAll('.sidebar-nav li')[5].querySelector('span').textContent = translations[lang]['assistant'];
    // Botón de logout del sidebar
    if (document.getElementById('sidebarLogoutBtn')) {
        document.getElementById('sidebarLogoutBtn').title = translations[lang]['logout'];
    }
    // Perfil de usuario en navbar
    if (document.querySelector('.user-name')) {
        document.querySelector('.user-name').textContent = translations[lang]['user'] || 'User';
    }
    if (document.querySelector('.user-level')) {
        document.querySelector('.user-level').textContent = translations[lang]['level'] || 'Level 2';
    }
    // Menú desplegable
    if (document.querySelector('.dropdown-user-name')) {
        document.querySelector('.dropdown-user-name').textContent = translations[lang]['user'] || 'User';
    }
    if (document.querySelector('.dropdown-user-level')) {
        document.querySelector('.dropdown-user-level').textContent = translations[lang]['level'] || 'Level 2';
    }
    // Título principal
    document.querySelector('.goal-title').textContent = translations[lang]['goal-title'];
    // Formulario
    document.querySelector('.card h5').textContent = translations[lang]['add-new-goal'];
    document.querySelector('label[for="goalName"]').textContent = translations[lang]['goal-name'];
    document.querySelector('label[for="goalTarget"]').textContent = translations[lang]['target-amount'];
    document.querySelector('label[for="goalDeadline"]').textContent = translations[lang]['deadline'];
    document.querySelector('#goalForm button[type="reset"]').textContent = translations[lang]['clear'];
    document.querySelector('#goalForm button[type="submit"]').textContent = translations[lang]['add-goal'];
    // Lista de metas vacía
    const noGoals = document.querySelector('#goalsList .text-center.text-muted');
    if(noGoals) noGoals.textContent = translations[lang]['no-goals'];
    // Modal ahorro
    document.getElementById('addSavingModalLabel').textContent = translations[lang]['add-saving-modal'];
    document.querySelector('label[for="savingAmount"]').textContent = translations[lang]['how-much'];
    document.querySelector('#addSavingForm button[type="button"]').textContent = translations[lang]['cancel'];
    document.querySelector('#addSavingForm button[type="submit"]').textContent = translations[lang]['add'];
    // Botones y textos dinámicos de metas
    document.querySelectorAll('.goal-card').forEach(card => {
        const achieved = card.querySelector('.goal-achieved-card');
        if(achieved) achieved.innerHTML = `<span class='goal-emoji'>🏆</span>${translations[lang]['achievement-reached']} <b>${card.querySelector('.goal-title').textContent}</b>`;
        card.querySelectorAll('.goal-actions .btn-outline-success').forEach(btn => btn.textContent = translations[lang]['add-saving']);
        card.querySelectorAll('.goal-actions .btn-outline-danger').forEach(btn => btn.textContent = translations[lang]['delete']);
        // Deadline label
        const deadlineDiv = Array.from(card.childNodes).find(n => n.textContent && n.textContent.includes('Deadline:'));
        if(deadlineDiv) deadlineDiv.innerHTML = translations[lang]['deadline-label'] + deadlineDiv.innerHTML.split(':')[1];
    });
}
document.getElementById('langToggle').addEventListener('click', function() {
    const current = localStorage.getItem('finx_lang') || 'es';
    const next = current === 'es' ? 'en' : 'es';
    setLanguage(next);
});
document.addEventListener('DOMContentLoaded', function() {
    const lang = localStorage.getItem('finx_lang') || 'es';
    setLanguage(lang);
    
    // Event listener para el toggle del sidebar
    document.getElementById('sidebarToggle').addEventListener('click', toggleSidebar);
});

// Función para toggle del sidebar
function toggleSidebar() {
    const sidebar = document.querySelector('.trivia-sidebar, .leccion-sidebar');
    const toggleBtn = document.getElementById('sidebarToggle');
    const icon = toggleBtn.querySelector('i');
    const mainContent = document.querySelector('.main-content');
    
    sidebar.classList.toggle('hidden');
    toggleBtn.classList.toggle('sidebar-hidden');
    mainContent.classList.toggle('sidebar-hidden');
    
    if (sidebar.classList.contains('hidden')) {
        icon.className = 'bi bi-chevron-right';
    } else {
        icon.className = 'bi bi-chevron-left';
    }
}
</script>
</body>
</html> 